<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="/assets/bootstrap-5.3.3-dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="/assets/css/theme-formatting.css">
	<script src="/assets/bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js"></script>
	<script src="/src/navbar.js" defer></script>
</head>
<body class="bg-dark" data-bs-theme="dark">
	<nav-bar></nav-bar>
	
	<div class="container">
		<div class="form-switch theme-mode-button">
			<input class="form-check-input" type="checkbox" role="switch" id="themeSwitch" onchange="themeChange(event)" value="true">
			<label class="form-check-label" for="darkMode" id="themeLabel">Dark Mode</label>
		</div>
	</div>

	<script>
		const themeModes = {
			0: {
				theme: 'light',
				label: 'Light Mode',
				style: 'bg-light'
			},
			1: {
				theme: 'dark',
				label: 'Dark Mode',
				style: 'bg-dark'
			}
		}

		const themeChange = (event) => {
			// When the theme changes
			// 1. Change the value of the switch
			document.getElementById('themeSwitch')['value'] = event.target.checked;

			// 2. Change the label text of the toggle button
			const themeKey = Number(event.target.checked);
			const themeMode = themeModes[themeKey];
			document.getElementById('themeLabel').textContent = themeMode.label;

			// 3. Change the bootstrap theme to the selected theme
			const oppositeKey = Number(!themeKey)
			let elements = document.getElementsByClassName(themeModes[oppositeKey].style);
			elements = Array.from(elements)
			console.log(elements)

			elements.forEach(element => {
				element.setAttribute('data-bs-theme', themeMode.theme);
				element.classList = themeMode.style;
			})
		}
	</script>
</body>
</html>